pipeline {
    agent any
    
    stages {
        stage('Build') {
            steps {
                echo 'Building code...'
            }
        }
        
        stage('Send Email Notification') {
            steps {
                echo 'Sending test email...'
                sendEmailNotification('Test Email', 'This is a test email from Jenkins.')
            }
        }
    }
    
    post {
        success {
            echo 'Pipeline Successful: ${currentBuild.fullDisplayName}'
        }
        failure {
            echo 'Pipeline Failed: ${currentBuild.fullDisplayName}'
        }
    }
}

def sendEmailNotification(subject, body, attachmentsPattern = '') {
    emailext (
        subject: subject,
        body: body,
        to: "your-email@example.com"
    )
}
